**1.建立一个关于系、学生、班级、学会等诸多信息的关系数据库如下：**

  **学生（学号，姓名，出生年月，系名，班号，宿舍区）**

  **班级（班号，专业名，系名，班级人数，入校年份）**

  **系  （系号，系名，系办公地点，系人数）**

  **学会（学会名，成立年份，地点，学会会员人数）**

  **学生-学会（学号，学会名，入会年份）**

**相关语义：一个系有若干个专业，每个专业每年只招收一个班，每个班有若干学生，一个系的学生住在同一宿舍，每个学生可参加若干学会，每个学会由若干学生组成，学生参加某学会会有一个入会年份。**

**请依次写出每个关系模式的：**

1) **函数依赖集;**

2) **是否存在传递函数依赖？**

3) **是否存在部分函数依赖？**

4) **该关系属于几级范式？**

5) **每个关系的候选码、外码？**

在实际情况，系名不会重复出现，系号和系名一一对应，所以系名在关系“班级”里是外码。专业名也不会重复出现，但因为题目中也没给专业这个关系，所以专业名在班级不算外码。学会名称也不会重复出现。

-----

1. **学生（学号，姓名，出生年月，系名，班号，宿舍区）**

   1. 函数依赖集; 
      $$
       学号 \rightarrow 姓名，学号 \rightarrow 出生年月， 系名 \rightarrow 宿舍区，学号 \rightarrow 班号，班号 \rightarrow 系名
      $$

   2. 传递函数依赖：


   $$
   班号 \stackrel{传递}{\longrightarrow} 宿舍区，学号 \stackrel{传递}{\longrightarrow} 宿舍区，学号 \stackrel{传递}{\longrightarrow} 系名
   $$

   

   3. 存在。比如

   $$
   (学号，姓名)\stackrel{P}{\longrightarrow} 出生年月
   $$

   4. 2NF。其不满足R中每一个非主属性都不传递依赖于候选码，但满足2NF的条件。

   5. 候选码：学号；外码：班号、系名

2. **班级（班号，专业名，系名，班级人数，入校年份）**

   1. 函数依赖：
      $$
      班号 \rightarrow 专业名，专业名 \rightarrow 系名，班号 \rightarrow 班级人数， 班号 \rightarrow 入校年份，(专业名，入校年份) \rightarrow 班号
      $$
   2. 传递函数依赖
      $$
      班号 \stackrel{传递}{\longrightarrow} 系名
      $$
      
   3. 存在。比如
      $$
      (班号，专业名)\stackrel{P}{\longrightarrow} 系名，(入校年份，专业名)\stackrel{P}{\longrightarrow} 系名
      $$
   4. 1NF。系名部分函数依赖于候选码（专业名，入校年份）
   5. 候选码：班号，（专业名，入校年份）；外码：系名

3. **系  （系号，系名，系办公地点，系人数）**

   1. 函数依赖集; 
      $$
      系号 \rightarrow 系名，系名 \rightarrow 系号，系名 \rightarrow 系办公地点， 系名 \rightarrow 系人数
      $$
   2. 不存在传递函数依赖。
   3. 存在部分函数依赖：$(系号，系人数)\stackrel{P}{\longrightarrow} 系办公地点$
   4. BCNF
   5. 候选码：系号、系名；不含外码

4.   **学会（学会名，成立年份，地点，学会会员人数）**

   1. 函数依赖：
      $$
      学会名 \rightarrow 成立年份，学会名 \rightarrow 地点，学会名 \rightarrow 学会会员人数
      $$

   2. 不存在传递函数依赖。

   3. 存在。比如
      $$
      (学会名，地点)\stackrel{P}{\longrightarrow} 成立年份
      $$

   4. BCNF。

   5. 候选码：学会名；不存在外码。

5.   **学生-学会（学号，学会名，入会年份）**

   1. 函数依赖：
      $$
      (学号, 学会名) \rightarrow 入会年份 
      $$

   2. 不存在传递函数依赖。

   3. 不存在部分函数依赖。

   4. BCNF。

   5. 候选码：（学号，学会名）；外码：学号、学会名



-----

**2、设有关系模式R(U，F)，其中：**

**U＝{A，B，C，D，E，P}，**

**F＝{A→B，C→P，E→A，CE→D}**

**求出R的所有候选码(给出求解过程) 。**

---

由于没有任何函数依赖能推出E，C，所以构造EC的闭包。

$X_0=\{E,C\}$

$\because E\rightarrow A, CE \rightarrow D,C \rightarrow P, $

$\therefore X_1 = X_0 \cup \{A,D,P\} = \{A,D,P,E,C\}$

$\because A \rightarrow B$

$\therefore X_2 = X_1 \cup B = U$

所以 EC 可以函数确定 U，且为完全函数依赖关系，因为EC就是R的唯一候选码

----

**3、设有一教学管理数据库，其属性为：学号(S#)，课程号(C#)，成绩(G)，任课教师(TN)，教师所在的系(D)。这些数据有下列语义：**

**学号和课程号分别与其代表的学生和课程一一对应；**
**一个学生所修的每门课程都有一个成绩；**
**每门课程只有一位任课教师，但每位教师可以有多门课程；**
**教师中没有重名，每个教师只属于一个系。**

**(1) 试根据上述语义确定函数依赖集。**

**(2) 如果用上面所有属性组成一个关系模式，那么该关系模式为何模式?并举例说明在进行增、删操作时的异常现象。**

**(3) 将其分解为3NF。**

----

1. 函数依赖集：
   $$
   (学号，课程号) \rightarrow 成绩，课程号 \rightarrow 任课老师，任课老师 \rightarrow 系
   $$
   

2. 1NF，因为候选码为（学号，课程号），任课老师部分函数依赖于该候选码。如果某个学生还没有选课，那他的信息将无法插入；如果某个学生退掉了他所修的最后一门课，那他的信息的整个元组都要被删除。
3. SC(学生，课程号，成绩)，C-TN（课程号，任课老师），TN-D（任课老师，系）