## P1

**从ATM到服务器的信息**

| 消息名称             | 目的                                                   |
| -------------------- | ------------------------------------------------------ |
| HELO `<userid>`      | 让服务器知道ATM机器中有卡片，ATM卡将用户ID传送给服务器 |
| PASSWD `<passwd>`    | 用户输入将发送给服务器的PIN(密码)                      |
| BALANCE              | 用户请求查询                                           |
| WITHDRAWL `<amount>` | 用户请求取钱                                           |
| BYE                  | 用户操作完成                                           |

**从服务器至ATM机器的信息（显示）**

| 消息名称       | 目的                                      |
| -------------- | ----------------------------------------- |
| PASSWD         | 要求用户输入密码PIN                       |
| OK             | 最后一次请求操作 (PASSWD, WITHDRAWL) 正常 |
| ERR            | 最后一次请求操作 (PASSWD, WITHDRAWL) 错误 |
| AMOUNT `<amt>` | 回应BALANCE请求                           |
| BYE            | 用户操作结束，ATM显示欢迎界面             |

**钱够，正确回应：**

| 客户端                 | 方向            | 服务器                   |
| ---------------------- | :-------------- | ------------------------ |
| HELO (userid)          | --------------> | (检测userid是否有效)     |
|                        | <-------------  | PASSWD                   |
| PASSWD `<passwd>`      | --------------> | (检测密码)               |
|                        | <-------------  | OK (密码OK)              |
| BALANCE                | --------------> |                          |
|                        | <-------------  | AMOUNT `<amt>`           |
| WITHDRAWL `<amt>`      | --------------> | （检测是否有足够钱来取） |
|                        | <-------------  | OK                       |
| ATM 吐钞（客户端动作） |                 |                          |
| BYE                    | --------------> |                          |
|                        | <-------------  | BYE                      |
|                        |                 |                          |

**钱不够的情况下：**

| 客户端                     | 方向            | 服务器                   |
| -------------------------- | --------------- | ------------------------ |
| HELO (userid)              | --------------> | (检测userid是否有效)     |
|                            | <-------------  | PASSWD                   |
| PASSWD `<password>`        | --------------> | (检测password)           |
|                            | <-------------  | OK (password OK)         |
| BALANCE                    | --------------> |                          |
|                            | <-------------  | AMOUNT `<amt>`           |
| WITHDRAWL `<amt>`          | --------------> | （检测是否有足够钱来取） |
|                            | <-------------  | ERR (钱不够)             |
| 显示错误信息（客户端动作） |                 |                          |
| 不吐钱（客户端动作）       |                 |                          |
| BYE                        | --------------> |                          |
|                            | <-------------  | BYE                      |
|                            |                 |                          |

## P3

### a

电路交换网络非常适合这种应用，原因如下：

1. 应用程序涉及长会话，类比电话通信，为求稳定性，电路交换比分组交换要好。
2. 具有可预测的带宽需求，不会出现请求激增的情况。
3. 传输速率已知，可以为用戶保留带宽。与分组交换相比，每个应用程序会话并没有明显的浪费。
4. 建立和拆除连接的消耗将在一段较长的典型的应用程序会话时间内摊销。

### b

不需要。由于传输速率总和小于链路容量，每个链路都有足够的带宽来处理在所有应用程序的数据速率总和，不会出现拥塞，不需要拥塞控制机制。

## P4

### a

最多共4 * 4 = 16条连接.

### b

A 到 B ：4 条

B 到 C ：4 条

共8条。

### c

可以。

A和C之间的连接，通过B路有两个连接，通过D路有两个连接。

对于B和D之间的连接，通过A路有两个连接，通过C路有两个连接。

从而能够通过这四条链路容纳八个链接。