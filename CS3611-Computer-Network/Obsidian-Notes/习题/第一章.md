#计算机网络 

# 复习题
## 1. 1 节 什么是因特网
R1. “主机” 和 “端系统”之间有什么不同? 列举几种不同类型的端系统。Web 服务器是一种端系统吗?
>（1）没有区别。根据书本内容，“主机”和“终端系统”是可以互用的。
>（2）终端系统包括PC、工作站、网络服务器、邮件服务器、PDA、连接网络的游戏控制台等等。
>（3）由（2）可知，网络服务器是终端系统。


R2. “协议”一词常被用于描述外交关系。维基百科是怎样描述外交协议的?
R3. 标准对于协议为什么重要?
>标准对于协议来说，可以让人们创建可以相互操作的网络系统和产品。


## 1. 2 节 网络边缘

R4. 列出 6 种接入技术。将它们分类为住宅接入、公司接入或广域无线接入。
R5. HFC 传输速率在用户间是专用的还是共享的? 在下行 HFC 信道中，可能出现碰撞吗? 为什么?
R6. 列出你所在城市中的可供使用的住宅接入技术。对于每种类型的接入方式, 给出所宣称的下行速率、 上行速率和每月的价格。
R7. 以太 LAN 的传输速率是多少?
>10Mbps、100Mbps、1Gbps、10Gbps


R8. 能够运行以太网的一些物理媒体是什么?
>大部分情况为双绞线，也可以使用光纤


R9. 拨号调制解调器、HFC、DSL 和 FTTH 都用于住宅接入。对于这些技术, 给出每种技术的传输速率的 范围, 并讨论它们的传输速率是共享的还是专用的。
R10. 描述今天最为流行的无线因特网接入技术。对它们进行比较和对照。
>（1）WiFi。用于无线局域网，无线用户从辐射范围为几十米的基站（例如无线接入点） 传输/接收 数据包。基站连接无线网络，并为无线用户提供无线网服务。
>（2）3G和4G大范围无线网。此系统通过电信服务商提供的基站，由蜂窝电话通过同一个无线设备传输数据。可以提供基站几十千米范围内的无线网络。

## 1. 3 节 网络核心
R11. 假定在发送主机和接收主机间只有一台分组交换机。发送主机和交换机间以及交换机和接收主机间 的传输速率分别是 $R_1$ 和 $R_2$ 。假设该交换机使用存储转发分组交换方式, 发送一个长度为 $L$ 的分组 的端到端总时延是什么? (忽略排队时延、传播时延和处理时延。)
R12. 与分组交换网络相比, 电路交换网络有哪些优点? 在电路交换网络中, TDM 比 FDM 有哪些优点?
R13. 假定用户共享一条 $2 \mathrm{Mbps}$ 链路。同时假定当每个用户传输时连续以 $1 \mathrm{Mbps}$ 传输, 但每个用户仅传输 $20 \%$ 的时间。
a. 当使用电路交换时, 能够支持多少用户?
b. 作为该题的后继问题, 假定使用分组交换。为什么如果两个或更少的用户同时传输的话，在链 路前面基本上没有排队时延? 为什么如果 3 个用户同时传输的话, 将有排队时延?
c. 求出某指定用户正在传输的概率。
d. 假定现在有 3 个用户。求出在任何给定的时间, 所有 3 个用户在同时传输的概率。求出队列增长 的时间比率。 new
要理解第一章全球网络的构建
R14. 为什么等级结构中级别相同的两个 ISP 通常互相对等? 某 IXP 是如何挣钱的?
>如果两个ISP不对等，那么当他们给对方发送流量时他们需要通过一个付费流量ISP提供商（中间商）来发送数据。通过直接对等传输，两个ISP可以减少给其他ISP提供商的费用。多个ISP可以通过网络交换点（IXP）（通常由它自己的交换机单独构建）作为汇合点来直接对等传输。ISP通过对连接至IXP的每一个ISP收取少量费用来盈利，当然利润取决于IXP发送或接收的流量数。


R15. 某些内容提供商构建了自己的网络。描述谷歌的网络。内容提供商构建这些网络的动机是什么?
>谷歌的私有网络连接了它大大小小的所有的数据中心。谷歌数据中心的流量通过它的私有网络而不是公共网络来传输。大多数的数据中心位于或靠近低级的ISP。因此，当谷歌向用户分发数据时，可以跳过高级的ISP。是什么推动着这些内容提供商创建这些网络？首先，如果内容提供商使用更少的中间的ISP，它可以更容易控制用户体验。其次，通过减少至提供商的网络流量来节省成本。第三，如果ISP向利润率高的内容提供商收取高费用（在网络中立状态不适用的国家或地区），内容提供商可以避免额外成本。


## 1.4 节  分组交换网
R16. 考虑从某源主机跨越一条固定路由向某目的主机发送一分组。列出端到端时延中的时延组成成分。 这些时延中的哪些是固定的, 哪些是变化的?
R17. 访问配套 Web 网站上有关传输时延与传播时延的 Java 小程序。在速率、传播时延和可用的分组长 度之中找出一种组合, 使得该分组的第一个比特到达接收方之前发送方结束了传输。找出另一种组 合, 使得发送方完成传输之前, 该分组的第一个比特到达了接收方。
R18. 一个长度为 1000 字节的分组经距离为 $2500 \mathrm{~km}$ 的链路传播, 传播速率为 $2.5 \times 10^8 \mathrm{~m} / \mathrm{s}$ 并且传输速率 为 $2 \mathrm{Mbps}$, 它需要用多长时间? 更为一般地,一个长度为 $L$ 的分组经距离为 $d$ 的链路传播, 传播速率为 $s$ 并且传输速率为 $R$ bps, 它需要用多长时间? 该时延与传输速率相关吗?
R19. 假定主机 A 要向主机 B 发送一个大文件。从主机 A 到主机 B 的路径上有 3 段链路, 其速率分别为 $R_1=500 \mathrm{kbps}, R_2=2 \mathrm{Mbps}, R_3=1 \mathrm{Mbps}$ 。
a. 假定该网络中没有其他流量, 该文件传送的吞吐量是多少?
b. 假定该文件为 $4 \mathrm{MB}$ 。用吞吐量除以文件长度, 将该文件传输到主机 $\mathrm{B}$ 大致需要多长时间?
c. 重复 (a) 和 (b), 只是这时 $R_2$ 减小到 $100 \mathrm{kbps}$ 。
R20. 假定端系统 $\mathrm{A}$ 要向端系统 B 发送一个大文件。在一个非常高的层次上, 描述端系统怎样从该文件生 成分组。当这些分组之一到达某分组交换机时, 该交换机使用分组中的什么信息来决定将该分组转 发到哪一条链路上? 因特网中的分组交换为什么可以与驱车从一个城市到另一个城市并沿途询问方 向相类比?
R21. 访问配套 Web 站点的排队和丢包 Java 小程序。最大发送速率和最小的传输速率是多少? 对于这 些速率, 流量强度是多大? 用这些速率运行该 Java 小程序并确定出现丢包要花费多长时间? 然后 第二次重复该实验, 再次确定出现丢包花费多长时间。这些值有什么不同? 为什么会有这种 现象?

## 1.5 节 协议层次及服务模型
R22. 列出一个层次能够执行的 5 个任务。这些任务中的一个 (或两个) 可能由两个 (或更多) 层次执 行吗?
R23. 因特网协议栈中的 5 个层次有哪些? 在这些层次中, 每层的主要任务是什么?
R24. 什么是应用层报文? 什么是运输层报文段? 什么是网络层数据报? 什么是链路层帧?
R25. 路由器处理因特网协议栈中的哪些层次? 链路层交换机处理的是哪些层次? 主机处理的是哪些 层次?

## 1.6 节 面对攻击的网络

R26. 病毒和蠕虫之间有什么不同?
>病毒需要诱发程序启动。蠕虫是自动的, 主动.
>a）病毒：需要一些人的交互来传播。比如邮件病毒。
>b）蠕虫：不需要用户介入。受感染主机中的蠕虫会扫描IP地址和端口号来查找可感染的进程。


R27. 描述如何产生一个僵尸网络, 以及僵尸网络是怎样被用于 DDoS 攻击的。
>创建僵尸网络需要攻击者发现一些应用或系统的薄弱点（比如利用应用中可能存在的缓冲区溢出漏洞）。发现薄弱点后，黑客需要查找可攻击的主机。目标一般是已发现漏洞的一系列系统。僵尸网络中的任何系统都可以通过漏洞自动扫描它的环境和传播。这种僵尸网络的重要属性就是僵尸网络的起点可以远程控制和发送命令至僵尸网络中的所有结点的每一个节点（例如僵尸网络中的所有结点可以被黑客命令发送TCP SYN信息至目标，并将导致目标的TCP SYN溢出攻击）。


R28. 假定 Alice 和 Bob 经计算机网络互相发送分组。假定 Trudy 将自己安置在网络中, 使得她能够俘获由 Alice 发送的所有分组, 并发送她希望给 Bob 的东西; 她也能够俘获由 Bob 发送的所有分组, 并发 送她希望给 Alice 的东西。列出在这种情况下 Trudy 能够做的某些恶意的事情。
>Trudy可以假装为Bob（反之亦然）并且部分或者完全修改Bob发送给Alice的信息。例如，她可以很容易的修改语句“Alice，我欠你1000美元”为“Alice，我欠你10000美元”。更进一步，Trudy甚至可以丢弃Bob发送给Alice的加密信息（反之亦然）。


# 习题

P1. 设计并描述在自动柜员机和银行的中央计算机之间使用的一种应用层协议。你的协议应当允许验证 用户卡和口令, 查询账目结算 (这些都在中央计算机中进行维护), 支取账目 (即向用户支付钱)。 你的协议实体应当能够处理取钱时账目中钱不够的常见问题。通过列出自动柜员机和银行中央计算 机在报文传输和接收过程中交换的报文和采取的动作来定义你的协议。使用类似于图 1-2 所示的图, 拟定在简单无差错取钱情况下该协议的操作。明确地阐述在该协议中关于底层端到端运输服务所做 的假设。

<mark style="background: #FFB86CA6;">P3</mark>. 考虑一个应用程序以稳定的速率传输数据（例如, 发送方每 $k$ 个时间单元产生一个 $N$ 比特的数据单 元, 其中 $k$ 较小且固定)。另外, 当这个应用程序启动时, 它将连续运行相当长的一段时间。回答下 列问题, 简要论证你的回答:
a. 是分组交换网还是电路交换网更为适合这种应用? 为什么?
>电路交换网络非常适合这种应用，因为应用程序涉及长会话，具有可预测的平滑带宽需求。因为传输速率是已知的，而不是突发的，所以可以为用户保留带宽，这样每个应用程序会话都没有明显的浪费。此外，建立和拆除连接的消耗将在一段较长的典型的应用程序会话时间内摊销。


b. 假定使用了分组交换网, 并且该网中的所有流量都来自如上所述的这种应用程序。此外, 假定该 应用程序数据传输速率的总和小于每条链路的各自容量。需要某种形式的拥塞控制吗? 为什么?
>不需要，传输速率总和小于链路容量。
>在最坏的情况下，所有应用程序同时通过一个或多个网络链接传输数据。然而，由于每个链路都有足够的带宽来处理在所有应用程序的数据速率总和，不会出现拥塞（很少排队）。考虑到如此大的链路容量，网络不需要拥塞控制机制。


<mark style="background: #FFB86CA6;">P4.</mark> 考虑在图 1-13 中的电路交换网。回想在每条链路上有 4 条链路, 以顺时针方向标记四台交换机 A、 $B 、 C$ 和 $\mathrm{D}$ 。
a. 在该网络中, 任何时候能够进行同时连接的最大数量是多少?
>在左上角的开关和右上角的开关之间，我们可以有4个连接。类似地，我们可以在其他3对相邻开关之间各有四个连接。因此，这个网络可以支持多达16个连接。比如：
>
>A 到 B ：4 条,B 到 C ：4 条, C 到 D ：4 条, D 到 A ：4 条
>
>这 16 条可以同时连接。


b. 假定所有连接位于交换机 A 和 C 之间。能够进行同时连接的最大数量是多少?
>我们可以通过右上角的开关通过4个连接，在左下角有4个通过开关的连接，总共有8个连接。
>
>A 到 B ：4 条, B 到 C ：4 条
>
>最多 8 条。


c. 假定我们要在交换机 A 和 C 之间建立 4 条连接, 在交换机 B 和 D 之间建立另外 4 条连接。我们能 够让这些呼叫通过这 4 条链路建立路由以容纳所有 8 条连接吗?
>可以。对于A和C之间的连接，我们通过B路由两个连接，通过D路由两个连接。对于B和D之间的连接，我们通过A路由两个连接，通过C路由两个连接。这样，最多有4个连接通过任何链接。
>
>A 到 B ：2 条
>
>B 到 A ：2 条
>
>A 到 D ：2 条
>
>B 到 C ：2 条

<img src="https://obsidian-1317758465.cos.ap-shanghai.myqcloud.com/images/20230527143536.png" alt="image.png" style="zoom:50%;" />



P6. 这个习题开始探讨传播时延和传输时延, 这是数据网络中的两个重要概念。考虑两台主机 $A$ 和 $B$ 由 一条速率为 $R$ bps 的链路相连。假定这两台主机相隔 $m$ 米, 沿该链路的传播速率为 $s \mathrm{~m} / \mathrm{s}$ 。主机 A 向 主机 $B$ 发送长度 $L$ 比特的分组。
a. 用 $m$ 和 $s$ 来表示传播时延 $d_{\text {prop }}$ 。
b. 用 $L$ 和 $R$ 来确定该分组的传输时间 $d_{\text {trans }}$ 。 
c. 忽略处理和排队时延, 得出端到端时延的表达式。
d. 假定主机 $\mathrm{A}$ 在时刻 $t=0$ 开始传输该分组。在时刻 $t=d_{\text {trans }}$, 该分组的最后一个比特在什么地方?
e. 假定 $d_{\text {prop }}$ 大于 $d_{\text {trans }}$ 。在时刻 $\iota=d_{\text {trans }}$, 该分组的第一个比特在何处? 在路上, 在网络中
f. 假定 $d_{\text {propp }}$ 小于 $d_{\text {truns }}$ 。在时刻 $t=d_{\text {trans }}$, 该分组的第一个比特在何处? 在下一个收费站
g. 假定 $s=2.5 \times 10^8, L=120$ 比特, $R=56 \mathrm{kbps}$ 。求出使 $d_{\text {prop }}$ 等于 $d_{\text {trans }}$ 的距离 $m$ 。
>a) $\mathrm{d}_{\text {prop }}=\mathrm{m} / \mathrm{s}$ s
> b) $\mathrm{d}_{\mathrm{trans}}=\mathrm{L} / \mathrm{R}$
> c) $\mathrm{d}_{\text {end-to-end }}=\mathrm{d}_{\text {prop }}+\mathrm{d}_{\text {trans }}=\mathrm{m} / \mathrm{s}+\mathrm{L} / \mathrm{R} \mathrm{s}$
> d) 此位刚刚离开主机A
> e) 第一位在链路上并且还没有到达主机B
> f) 第一位已经到达主机B
> g) $\mathrm{d}_{\text {prop }}=\mathrm{d}_{\mathrm{trans}}$
> $$
> \begin{aligned}
> & \mathrm{m} / \mathrm{s}=\mathrm{L} / \mathrm{R} \\
> & \mathrm{m}=\frac{\mathrm{L}}{\mathrm{R}} \mathrm{s}=\frac{120 \mathrm{~b}}{56 \times 10^3 \mathrm{bps}} *\left(2.5 * 10^8\right) \mathrm{m} / \mathrm{s}=\left(5.36 * 10^5\right) \mathrm{m}=536 \mathrm{~km}
> \end{aligned}
>$$

P9. 考虑在 1.3 节 “分组交换与电路交换的对比” 的讨论中, 给出了一个具有一条 $1 \mathrm{Mbps}$ 链路的例子。 用户在忙时以 $100 \mathrm{kbps}$ 速率产生数据, 但忙时仅以 $p=0.1$ 的概率产生数据。假定用 $1 \mathrm{Gbps}$ 链路替代 $1 \mathrm{Mbps}$ 的链路。
a. 当采用电路交换技术时，能被同时支持的最大用户数量 $N$ 是多少?
b. 现在考虑分组交换和有 $M$ 个用户的情况。给出多于 $N$ 用户发送数据的概率公式（用 $p 、 M 、 N$ 表示)。

>a) $\mathrm{N}=1 \mathrm{Gbps} / 100 \mathrm{kbps}=10^4$
>b) $\sum_{n=N+1}^M\left(\begin{array}{c}M \\ n\end{array}\right) p^n(1-p)^{M-n}$


P22. 考虑图 1-19b。假定服务器与客户之间的每条链路的丢包概率为 $p$, 且这些链路的丢包率是独立的。 一个（由服务器发送的）分组成功地被接收方收到的概率是多少? 如果在从服务器到客户的路径上分组丢失了, 则服务器将重传该分组。平均来说, 为了使客户成功地接收该分组, 服务器将要重传 该分组多少次?